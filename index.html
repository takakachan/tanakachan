<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Pulse</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg: #0d0d0f; --bg2: #141418; --bg3: #1a1a1f; --card: #1e1e24; --accent: #e85d04; --accent2: #f48c06; --grad: linear-gradient(135deg,#e85d04,#f48c06,#faa307); --glow: rgba(232,93,4,0.3); --text: #fafafa; --text2: #a1a1aa; --text3: #71717a; --border: #27272a; --border2: #3f3f46; --like: #ef4444; --likeg: rgba(239,68,68,0.25); --nope: #8b5cf6; --nopeg: rgba(139,92,246,0.25); --arch: #f59e0b; --archg: rgba(245,158,11,0.2); --ok: #22c55e; --rs: 12px; --rl: 20px; --rx: 28px; --sh: 0 4px 16px rgba(0,0,0,0.4); --sh2: 0 8px 32px rgba(0,0,0,0.5); --sh3: 0 16px 48px rgba(0,0,0,0.6); }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Zen Kaku Gothic New',-apple-system,sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; -webkit-font-smoothing: antialiased; }
    body::before { content: ''; position: fixed; inset: 0; background: radial-gradient(ellipse 100% 60% at 20% 0%,rgba(232,93,4,0.08),transparent 50%),radial-gradient(ellipse 80% 50% at 80% 100%,rgba(244,140,6,0.06),transparent 50%); pointer-events: none; z-index: -1; }
    header { position: sticky; top: 0; height: 72px; background: rgba(13,13,15,0.85); backdrop-filter: blur(24px); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 32px; z-index: 100; }
    .logo { display: flex; align-items: center; gap: 14px; font-size: 1.4rem; font-weight: 700; }
    .logn { width: 40px; height: 40px; background: var(--grad); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; box-shadow: 0 4px 20px var(--glow); animation: lp 4s ease-in-out infinite; }
    @keyframes lp { 0%,100% { box-shadow: 0 4px 20px var(--glow); } 50% { box-shadow: 0 4px 30px rgba(244,140,6,0.5); } }
    .logt span { background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .nav { display: flex; gap: 6px; background: var(--bg2); padding: 6px; border-radius: var(--rl); border: 1px solid var(--border); }
    .nb { padding: 10px 18px; border-radius: var(--rs); border: none; background: 0; color: var(--text2); font-size: 0.95rem; font-weight: 500; cursor: pointer; transition: 0.15s; display: flex; align-items: center; gap: 8px; }
    .nb:hover { color: var(--text); background: var(--bg3); }
    .nb.on { background: var(--grad); color: #fff; box-shadow: 0 2px 12px var(--glow); }
    .nb .ic { font-size: 1.1rem; }
    .acts { display: flex; gap: 10px; }
    .ab { width: 42px; height: 42px; border-radius: var(--rs); border: 1px solid var(--border); background: var(--bg2); color: var(--text2); font-size: 1.1rem; cursor: pointer; transition: 0.15s; display: flex; align-items: center; justify-content: center; }
    .ab:hover { background: var(--bg3); color: var(--text); transform: translateY(-1px); }
    main { max-width: 1400px; margin: 0 auto; padding: 32px; }
    .filt { display: flex; gap: 10px; margin-bottom: 28px; flex-wrap: wrap; animation: fiu 0.5s ease backwards; }
    @keyframes fiu { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
    .fc { padding: 10px 20px; border-radius: 100px; background: var(--bg2); border: 1px solid var(--border); color: var(--text2); font-size: 0.9rem; font-weight: 500; cursor: pointer; transition: 0.15s; }
    .fc:hover { border-color: var(--accent); color: var(--text); transform: translateY(-1px); }
    .fc.on { background: var(--grad); border-color: transparent; color: #fff; box-shadow: 0 4px 16px var(--glow); }
    .stats { display: flex; gap: 16px; margin-bottom: 32px; flex-wrap: wrap; }
    .sc { flex: 1; min-width: 160px; padding: 20px 24px; background: var(--bg2); border-radius: var(--rl); border: 1px solid var(--border); display: flex; align-items: center; gap: 16px; animation: fiu 0.5s ease backwards; }
    .sc:nth-child(1) { animation-delay: 0.1s; }
    .sc:nth-child(2) { animation-delay: 0.15s; }
    .sc:nth-child(3) { animation-delay: 0.2s; }
    .si { width: 48px; height: 48px; border-radius: var(--rs); display: flex; align-items: center; justify-content: center; font-size: 1.4rem; }
    .si.t { background: rgba(139,92,246,0.15); }
    .si.l { background: var(--likeg); }
    .si.a { background: var(--archg); }
    .sv { display: flex; flex-direction: column; }
    .svv { font-size: 1.8rem; font-weight: 700; }
    .svl { font-size: 0.8rem; color: var(--text3); text-transform: uppercase; letter-spacing: 0.05em; }
    .cg { display: grid; grid-template-columns: repeat(auto-fill,minmax(320px,1fr)); gap: 24px; }
    .card { background: var(--card); border-radius: var(--rx); overflow: hidden; border: 1px solid var(--border); cursor: pointer; transition: 0.25s; animation: fiu 0.5s ease backwards; }
    .card:hover { transform: translateY(-8px); border-color: var(--accent); box-shadow: var(--sh3),0 0 40px var(--glow); }
    .cth { width: 100%; height: 180px; object-fit: cover; background: linear-gradient(135deg,var(--bg3),var(--bg2)); }
    .cb { padding: 20px; }
    .cm { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
    .ct { padding: 4px 10px; border-radius: 6px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
    .ct.yt { background: rgba(255,0,0,0.15); color: #f44; }
    .ct.rs { background: rgba(255,140,0,0.15); color: #f80; }
    .ct.bk { background: rgba(139,92,246,0.15); color: #a7b; }
    .ct.mv { background: rgba(59,130,246,0.15); color: #6af; }
    .ct.pc { background: var(--likeg); color: var(--like); }
    .cs { color: var(--text3); font-size: 0.8rem; }
    .ctt { font-size: 1.05rem; font-weight: 600; line-height: 1.5; margin-bottom: 12px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .cf { display: flex; justify-content: space-between; align-items: center; }
    .cd { color: var(--text3); font-size: 0.8rem; }
    .ca { display: flex; gap: 8px; }
    .cab { width: 36px; height: 36px; border-radius: 10px; border: none; background: var(--bg3); color: var(--text3); font-size: 1rem; cursor: pointer; transition: 0.15s; display: flex; align-items: center; justify-content: center; }
    .cab:hover { transform: scale(1.1); }
    .cab.lk { background: var(--likeg); color: var(--like); }
    .cab.ar { background: var(--archg); color: var(--arch); }
    .tc { display: none; flex-direction: column; align-items: center; justify-content: center; min-height: calc(100vh - 200px); padding: 40px 20px; }
    .tc.on { display: flex; }
    .ts { position: relative; width: 100%; max-width: 380px; height: 560px; perspective: 1200px; }
    .tcard { position: absolute; width: 100%; height: 100%; background: var(--card); border-radius: var(--rx); overflow: hidden; box-shadow: var(--sh3); transition: transform 0.1s,box-shadow 0.3s; will-change: transform; }
    .tcard.dg { box-shadow: 0 40px 80px rgba(0,0,0,0.6); cursor: grabbing; }
    .tcard.sl { border: 3px solid var(--nope); }
    .tcard.sr { border: 3px solid var(--like); }
    .ti { width: 100%; height: 320px; object-fit: cover; background: linear-gradient(135deg,var(--bg3),var(--bg2)); }
    .tcon { padding: 24px; height: calc(100% - 320px); display: flex; flex-direction: column; }
    .tty { display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 8px; font-size: 0.8rem; font-weight: 600; margin-bottom: 12px; width: fit-content; }
    .tt { font-size: 1.4rem; font-weight: 700; line-height: 1.4; flex: 1; }
    .td { color: var(--text3); font-size: 0.9rem; margin-top: 12px; }
    .tss { position: absolute; top: 32px; padding: 12px 28px; border-radius: 12px; font-size: 2rem; font-weight: 800; text-transform: uppercase; letter-spacing: 3px; opacity: 0; transform: rotate(-12deg) scale(0.8); transition: 0.2s; z-index: 10; }
    .tss.sh { opacity: 1; transform: rotate(-12deg) scale(1); }
    .tss.lk { right: 32px; background: var(--like); color: #fff; }
    .tss.np { left: 32px; background: var(--nope); color: #fff; transform: rotate(12deg); }
    .tss.np.sh { transform: rotate(12deg) scale(1); }
    .tctl { display: flex; gap: 20px; margin-top: 32px; }
    .tb { width: 68px; height: 68px; border-radius: 50%; border: 2px solid; background: var(--card); cursor: pointer; font-size: 1.5rem; transition: 0.25s; display: flex; align-items: center; justify-content: center; }
    .tb:active { transform: scale(0.95); }
    .tb.np { border-color: var(--nope); color: var(--nope); }
    .tb.np:hover { background: var(--nope); color: #fff; box-shadow: 0 8px 32px var(--nopeg); transform: scale(1.1); }
    .tb.ud { border-color: var(--arch); color: var(--arch); }
    .tb.ud:hover { background: var(--arch); color: #fff; box-shadow: 0 8px 32px var(--archg); transform: scale(1.1); }
    .tb.lk { border-color: var(--like); color: var(--like); }
    .tb.lk:hover { background: var(--like); color: #fff; box-shadow: 0 8px 32px var(--likeg); transform: scale(1.1); }
    .tpr { margin-top: 20px; font-size: 0.95rem; color: var(--text3); padding: 10px 20px; background: var(--bg2); border-radius: 100px; }
    .thi { display: flex; justify-content: space-between; width: 100%; max-width: 380px; margin-top: 16px; color: var(--text3); font-size: 0.85rem; }
    .es { text-align: center; padding: 80px 24px; color: var(--text3); grid-column: 1/-1; }
    .eic { font-size: 5rem; margin-bottom: 20px; opacity: 0.4; }
    .eti { font-size: 1.4rem; font-weight: 600; color: var(--text2); margin-bottom: 8px; }
    .mo { position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center; z-index: 200; opacity: 0; visibility: hidden; transition: 0.3s; }
    .mo.on { opacity: 1; visibility: visible; }
    .m { background: var(--bg2); border-radius: var(--rx); width: 90%; max-width: 520px; max-height: 80vh; overflow-y: auto; transform: scale(0.9) translateY(20px); transition: 0.3s; border: 1px solid var(--border); }
    .mo.on .m { transform: scale(1) translateY(0); }
    .mh { padding: 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: var(--bg2); z-index: 10; }
    .mt { font-size: 1.3rem; font-weight: 700; }
    .mc { width: 40px; height: 40px; border-radius: var(--rs); border: none; background: var(--bg3); color: var(--text2); font-size: 1.3rem; cursor: pointer; transition: 0.15s; }
    .mc:hover { background: var(--card); color: var(--text); }
    .mb { padding: 24px; }
    .fg { margin-bottom: 20px; }
    .fl { display: block; font-size: 0.9rem; font-weight: 500; margin-bottom: 8px; color: var(--text2); }
    .fs { width: 100%; padding: 14px 18px; border-radius: var(--rs); border: 1px solid var(--border); background: var(--bg3); color: var(--text); font-size: 1rem; cursor: pointer; transition: 0.15s; }
    .fs:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px var(--glow); }
    .bp { width: 100%; padding: 14px 24px; border-radius: var(--rs); border: none; background: var(--grad); color: #fff; font-size: 1rem; font-weight: 600; cursor: pointer; transition: 0.15s; box-shadow: 0 4px 16px var(--glow); }
    .bp:hover { transform: translateY(-2px); box-shadow: 0 6px 24px var(--glow); }
    .db { display: inline-flex; align-items: center; gap: 8px; padding: 12px 18px; background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.3); border-radius: var(--rs); color: var(--ok); font-size: 0.9rem; margin-bottom: 20px; }
    .co { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 250; opacity: 0; visibility: hidden; transition: 0.2s; }
    .co.on { opacity: 1; visibility: visible; }
    .cbx { background: var(--bg2); border-radius: var(--rx); padding: 28px; max-width: 340px; text-align: center; transform: scale(0.9); transition: 0.2s; border: 1px solid var(--border); }
    .co.on .cbx { transform: scale(1); }
    .ci { font-size: 3rem; margin-bottom: 16px; }
    .cti { font-size: 1.2rem; font-weight: 700; margin-bottom: 10px; }
    .ctx { color: var(--text3); margin-bottom: 24px; font-size: 0.95rem; }
    .ca2 { display: flex; gap: 12px; justify-content: center; }
    .cb2 { padding: 12px 28px; border-radius: var(--rs); border: none; font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: 0.15s; }
    .cb2.cl { background: var(--bg3); color: var(--text2); }
    .cb2.dg { background: var(--like); color: #fff; }
    .tc2 { position: fixed; bottom: 28px; right: 28px; z-index: 300; display: flex; flex-direction: column; gap: 12px; }
    .to { padding: 14px 22px; background: var(--card); border: 1px solid var(--border); border-radius: var(--rs); font-size: 0.95rem; animation: ti 0.3s ease; box-shadow: var(--sh); }
    .to.ok { border-color: var(--ok); background: rgba(34,197,94,0.1); }
    @keyframes ti { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    .st { font-size: 1.5rem; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.02em; }
    .sd { color: var(--text3); margin-bottom: 24px; font-size: 0.95rem; }
    @media (max-width: 768px) { header { padding: 0 16px; height: 64px; } .logo { font-size: 1.2rem; } .logn { width: 36px; height: 36px; font-size: 1.1rem; } .nav { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); top: auto; padding: 8px; gap: 4px; z-index: 100; box-shadow: var(--sh3); } .nb { padding: 10px 14px; font-size: 0; } .nb .ic { font-size: 1.2rem; } .nb span:not(.ic) { display: none; } main { padding: 20px 16px; padding-bottom: 100px; } .cg { grid-template-columns: 1fr; gap: 16px; } .ts { height: 500px; } .stats { flex-direction: column; } .sc { min-width: auto; } }
  </style>
</head>
<body>
  <header>
    <div class="logo"><div class="logn">ğŸ“¡</div><div class="logt"><span>Media</span> Pulse</div></div>
    <nav class="nav">
      <button class="nb on" data-mode="grid" onclick="setMode('grid')"><span class="ic">ğŸ“‹</span><span>ä¸€è¦§</span></button>
      <button class="nb" data-mode="tinder" onclick="setMode('tinder')"><span class="ic">ğŸ’˜</span><span>ã‚¹ãƒ¯ã‚¤ãƒ—</span></button>
      <button class="nb" data-mode="likes" onclick="setMode('likes')"><span class="ic">â¤ï¸</span><span>ã„ã„ã­</span></button>
      <button class="nb" data-mode="archive" onclick="setMode('archive')"><span class="ic">ğŸ“¦</span><span>ä¿ç•™</span></button>
    </nav>
    <div class="acts">
      <button class="ab" onclick="refreshAll()" title="æ›´æ–°">ğŸ”„</button>
      <button class="ab" onclick="openSettings()" title="è¨­å®š">âš™ï¸</button>
    </div>
  </header>
  <main>
    <div id="grid-view">
      <div class="filt">
        <button class="fc on" data-filter="all">ã™ã¹ã¦</button>
        <button class="fc" data-filter="youtube">ğŸ“º YouTube</button>
        <button class="fc" data-filter="rss">ğŸ“° RSS</button>
        <button class="fc" data-filter="book">ğŸ“š æœ¬</button>
        <button class="fc" data-filter="movie">ğŸ¬ æ˜ ç”»</button>
        <button class="fc" data-filter="podcast">ğŸ™ï¸ Podcast</button>
      </div>
      <div class="stats">
        <div class="sc"><div class="si t">ğŸ“š</div><div class="sv"><span class="svv" id="total-count">0</span><span class="svl">Total</span></div></div>
        <div class="sc"><div class="si l">â¤ï¸</div><div class="sv"><span class="svv" id="like-count">0</span><span class="svl">ã„ã„ã­</span></div></div>
        <div class="sc"><div class="si a">ğŸ“¦</div><div class="sv"><span class="svv" id="archive-count">0</span><span class="svl">ä¿ç•™</span></div></div>
      </div>
      <div class="cg" id="cards"></div>
    </div>
    <div class="tc" id="tinder-view">
      <div class="ts">
        <div class="tcard" id="tinder-card">
          <div class="tss lk">LIKE</div>
          <div class="tss np">NOPE</div>
          <img class="ti" id="tinder-img" src="" alt="">
          <div class="tcon">
            <div class="tty" id="tinder-type"></div>
            <div class="tt" id="tinder-title"></div>
            <div class="td" id="tinder-date"></div>
          </div>
        </div>
      </div>
      <div class="thi"><span>â† ã‚¹ãƒ¯ã‚¤ãƒ—ã§ãƒ‘ã‚¹</span><span>ã‚¹ãƒ¯ã‚¤ãƒ—ã§ã„ã„ã­ â†’</span></div>
      <div class="tctl">
        <button class="tb np" onclick="tinderNope()">âœ•</button>
        <button class="tb ud" onclick="undoLast()">â†©ï¸</button>
        <button class="tb lk" onclick="tinderLike()">â¤ï¸</button>
      </div>
      <div class="tpr" id="tinder-progress"></div>
    </div>
    <div id="likes-view" style="display:none;">
      <h2 class="st">â¤ï¸ ã„ã„ã­ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2>
      <p class="sd">å¾Œã§è¦‹ãŸã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ”¶è—</p>
      <div class="cg" id="likes-cards"></div>
    </div>
    <div id="archive-view" style="display:none;">
      <h2 class="st">ğŸ“¦ ä¿ç•™ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2>
      <p class="sd">ãƒ‘ã‚¹ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚ä¸€æ™‚ä¿å­˜ã•ã‚Œã¾ã™</p>
      <div class="cg" id="archive-cards"></div>
    </div>
  </main>
  <div class="mo" id="settings-modal">
    <div class="m">
      <div class="mh"><h2 class="mt">è¨­å®š</h2><button class="mc" onclick="closeSettings()">Ã—</button></div>
      <div class="mb">
        <div class="db">ğŸ‰ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰å‹•ä½œä¸­</div>
        <div class="fg"><label class="fl">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã®ã‚«ãƒ†ã‚´ãƒª</label><select class="fs" id="demo-source" onchange="updateDemoSource()"><option value="tech">ğŸ’» ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒ»ãƒ†ãƒƒã‚¯</option><option value="entertainment">ğŸ¬ ã‚¨ãƒ³ã‚¿ãƒ¡ãƒ»æ˜ ç”»</option><option value="news">ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹</option><option value="science">ğŸ”¬ ç§‘å­¦ãƒ»æ•™è‚²</option><option value="podcast">ğŸ™ï¸ ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ</option></select></div>
        <button class="bp" onclick="loadDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€</button>
      </div>
    </div>
  </div>
  <div class="co" id="confirm-overlay">
    <div class="cbx">
      <div class="ci">ğŸ—‘ï¸</div>
      <div class="cti" id="confirm-title">å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</div>
      <div class="ctx" id="confirm-text">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</div>
      <div class="ca2"><button class="cb2 cl" onclick="closeConfirm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button><button class="cb2 dg" onclick="confirmDelete()">å‰Šé™¤</button></div>
    </div>
  </div>
  <div class="tc2" id="toasts"></div>
  <script>
    let state={items:[],filter:'all',currentMode:'grid',tinderIndex:0,tinderHistory:[],demoSource:'tech'};
    let deleteTarget=null;
    const demoData={
      tech:[
        {id:1,type:'youtube',title:'ã€å®Œå…¨ç‰ˆã€‘React 19 æ–°æ©Ÿèƒ½ç·ã¾ã¨ã‚',source:'WebMaster',thumbnail:'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false},
        {id:2,type:'youtube',title:'Claude APIå®Œå…¨ã‚¬ã‚¤ãƒ‰ - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ',source:'CodeLab',thumbnail:'https://i.ytimg.com/vi/ClaudeAPI/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false},
        {id:3,type:'rss',title:'æ–°ã—ã„JavaScriptãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç™ºè¡¨',source:'TechCrunch JP',thumbnail:'',date:'2026-02-17',url:'https://techcrunch.jp',liked:false,archived:false},
        {id:4,type:'podcast',title:'#195 ã‚†ã£ãã‚Šè§£èª¬ï¼šå®‡å®™ã®è¬',source:'ç§‘å­¦Podcast',thumbnail:'',date:'2026-02-16',url:'https://spotify.com',liked:false,archived:false},
        {id:5,type:'book',title:'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨­è¨ˆã®Gem',source:'æŠ€è¡“è©•è«–ç¤¾',thumbnail:'',date:'2026-02-16',url:'https://gihyo.jp',liked:false,archived:false},
        {id:6,type:'movie',title:'ã‚¹ãƒãƒ¼ãƒˆã€AIãŒäººé–“ã‚’çš„æ“ä½œã‚’é–‹å§‹',source:'MovieDB',thumbnail:'',date:'2026-02-15',url:'https://moviedb.org',liked:false,archived:false},
        {id:7,type:'youtube',title:'vimã¯æ­»ãªãªã„ - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ²¼',source:'Linux Fan',thumbnail:'https://i.ytimg.com/vi/vim/maxresdefault.jpg',date:'2026-02-15',url:'https://youtube.com',liked:false,archived:false},
        {id:8,type:'rss',title:'TypeScript 6.0 äºˆæƒ³ã¾ã¨ã‚',source:'TS Weekly',thumbnail:'',date:'2026-02-14',url:'https://example.com',liked:false,archived:false}
      ],
      entertainment:[
        {id:1,type:'youtube',title:'2026å¹´å†¬ã‚¢ãƒ‹ãƒ¡TOP10',source:'AnimeHype',thumbnail:'https://i.ytimg.com/vi/anime/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false},
        {id:2,type:'movie',title:'å¾…æœ›ã®ç¶šç·¨ï¼åä½œã®æ–°ä½œå…¬é–‹',source:'Cinema',thumbnail:'',date:'2026-02-17',url:'https://moviedb.org',liked:false,archived:false},
        {id:3,type:'youtube',title:'æœ‰åç›£ç£èªã‚‹ï¼æ˜ ç”»ä½œã‚Š',source:'DirectorTalk',thumbnail:'https://i.ytimg.com/vi/dir/maxresdefault.jpg',date:'2026-02-16',url:'https://youtube.com',liked:false,archived:false},
        {id:4,type:'podcast',title:'æ˜ ç”»ãƒˆãƒ¼ã‚¯ï¼šã‚¢ã‚«ãƒ‡ãƒŸãƒ¼è³äºˆæƒ³',source:'FilmTalk',thumbnail:'',date:'2026-02-16',url:'https://spotify.com',liked:false,archived:false},
        {id:5,type:'movie',title:'ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼è³ãƒãƒŸãƒãƒ¼ãƒˆè§£èª¬',source:'Oscar2026',thumbnail:'',date:'2026-02-15',url:'https://oscars.com',liked:false,archived:false}
      ],
      news:[
        {id:1,type:'rss',title:'ä¸»è¦ç´™ä¼ãˆã‚‹çµŒæ¸ˆNews',source:'æ—¥æœ¬çµŒæ¸ˆæ–°è',thumbnail:'',date:'2026-02-17',url:'https://nikkei.com',liked:false,archived:false},
        {id:2,type:'rss',title:'æ”¿åºœæ–°ã—ã„æ”¿ç­–ç™ºè¡¨',source:'NHK',thumbnail:'',date:'2026-02-17',url:'https://nhk.jp',liked:false,archived:false},
        {id:3,type:'rss',title:'ãƒ†ãƒƒã‚¯æ¥­ç•Œå¤§å‹M&A',source:'TechCrunch',thumbnail:'',date:'2026-02-16',url:'https://techcrunch.jp',liked:false,archived:false},
        {id:4,type:'rss',title:'ç’°å¢ƒå•é¡Œ æœ€æ–°å ±å‘Š',source:'Greenpeace',thumbnail:'',date:'2026-02-15',url:'https://greenpeace.org',liked:false,archived:false}
      ],
      science:[
        {id:1,type:'youtube',title:'å®‡å®™ã®èµ·æºã‹ã‚‰æœªæ¥ã¾ã§',source:'NASA',thumbnail:'https://i.ytimg.com/vi/space/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false},
        {id:2,type:'rss',title:'é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é€²æ­©',source:'ScienceDaily',thumbnail:'',date:'2026-02-16',url:'https://sciencedaily.com',liked:false,archived:false},
        {id:3,type:'youtube',title:'è„³ç§‘å­¦ãŒè§£æ˜ã™ã‚‹é›†ä¸­åŠ›',source:'BrainScience',thumbnail:'https://i.ytimg.com/vi/brain/maxresdefault.jpg',date:'2026-02-15',url:'https://youtube.com',liked:false,archived:false},
        {id:4,type:'podcast',title:'AIã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—',source:'MIT Tech',thumbnail:'',date:'2026-02-14',url:'https://spotify.com',liked:false,archived:false}
      ],
      podcast:[
        {id:1,type:'podcast',title:'#198 ã‚†ã‚‹è¨€èªå­¦ãƒ©ã‚¸ã‚ª',source:'ã‚†ã‚‹è¨€èªå­¦',thumbnail:'',date:'2026-02-17',url:'https://spotify.com',liked:false,archived:false},
        {id:2,type:'podcast',title:'ç©ã‚“èª­Channelsæœ€æ–°å›',source:'ç©ã‚“èª­',thumbnail:'',date:'2026-02-16',url:'https://spotify.com',liked:false,archived:false},
        {id:3,type:'podcast',title:'#45 å²¡æœ¬çœŸå¸†ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼',source:'æœ¬ã‚’èª­ã‚‚ã†',thumbnail:'',date:'2026-02-15',url:'https://spotify.com',liked:false,archived:false},
        {id:4,type:'podcast',title:'#220 å®®è—¤å®˜ä¹éƒèªã‚‹',source:'æ˜ ç•«äººç”Ÿ',thumbnail:'',date:'2026-02-14',url:'https://spotify.com',liked:false,archived:false}
      ]
    };
    function init(){loadDemoData();setupEvents();render();}
    function loadDemoData(){state.items=demoData[state.demoSource]||demoData.tech;
    }
    function setupEvents(){
      document.querySelectorAll('.fc').forEach(b=>{
        b.addEventListener('click',()=>{
          document.querySelectorAll('.fc').forEach(x=>x.classList.remove('on'));
          b.classList.add('on');
          state.filter=b.dataset.filter;
          if(state.currentMode==='tinder')init();
          render();
        });
      });
    }
    function setMode(m){
      state.currentMode=m;
      document.querySelectorAll('.nb').forEach(b=>b.classList.toggle('on',b.dataset.mode===m));
      document.getElementById('grid-view').style.display=m==='grid'?'block':'none';
      document.getElementById('tinder-view').classList.toggle('on',m==='tinder');
      document.getElementById('likes-view').style.display=m==='likes'?'block':'none';
      document.getElementById('archive-view').style.display=m==='archive'?'block':'none';
      if(m==='tinder')init();
      if(m==='archive')renderArchive();
      render();
    }
    function render(){
      let items=state.filter==='all'?state.items:state.items.filter(x=>x.type===state.filter);
      if(!items.length){document.getElementById('cards').innerHTML='<div class="es"><div class="eic">ğŸ“­</div><div class="eti">ã¾ã ä½•ã‚‚ãªã„ã‚ˆ</div></div>';return;}
      document.getElementById('cards').innerHTML=items.map((x,i)=>
        `<div class="card" style="animation-delay:${i*0.05}s" onclick="window.open('${x.url}','_blank')">
          ${x.thumbnail?`<img class="cth" src="${x.thumbnail}">`:''}
          <div class="cb">
            <div class="cm"><span class="ct ${x.type}">${x.type==='youtube'?'ğŸ“º':x.type==='rss'?'ğŸ“°':x.type==='book'?'ğŸ“š':x.type==='movie'?'ğŸ¬':'ğŸ™ï¸'}</span><span class="cs">${x.source}</span></div>
            <div class="ctt">${x.title}</div>
            <div class="cf"><span class="cd">ğŸ“… ${x.date}</span>
            <div class="ca">${x.liked?`<button class="cab lk" onclick="event.stopPropagation();toggleLike(${x.id})">â¤ï¸</button>`:''}${x.archived?`<button class="cab ar" onclick="event.stopPropagation();toggleArchive(${x.id})">ğŸ“¦</button>`:''}</div>
            </div>
          </div>
        </div>`
      ).join('');
      document.getElementById('total-count').textContent=state.items.length;
      document.getElementById('like-count').textContent=state.items.filter(x=>x.liked).length;
      document.getElementById('archive-count').textContent=state.items.filter(x=>x.archived).length;
    }
    function renderArchive(){
      const items=state.items.filter(x=>x.archived);
      if(!items.length){document.getElementById('archive-cards').innerHTML='<div class="es"><div class="eic">ğŸ“¦</div><div class="eti">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¯ç©ºã ã‚ˆ</div></div>';return;}
      document.getElementById('archive-cards').innerHTML=items.map((x,i)=>
        `<div class="card" style="animation-delay:${i*0.05}s" onclick="window.open('${x.url}','_blank')">
          ${x.thumbnail?`<img class="cth" src="${x.thumbnail}">`:''}
          <div class="cb">
            <div class="cm"><span class="ct ${x.type}">${x.type==='youtube'?'ğŸ“º':x.type==='rss'?'ğŸ“°':x.type==='book'?'ğŸ“š':x.type==='movie'?'ğŸ¬':'ğŸ™ï¸'}</span><span class="cs">${x.source}</span></div>
            <div class="ctt">${x.title}</div>
            <div class="cf"><span class="cd">ğŸ“… ${x.date}</span><button class="cab" onclick="event.stopPropagation();restoreArchive(${x.id})">â†©ï¸</button></div>
          </div>
        </div>`
      ).join('');
    }
    function renderLikes(){
      const items=state.items.filter(x=>x.liked);
      if(!items.length){document.getElementById('likes-cards').innerHTML='<div class="es"><div class="eic">ğŸ’”</div><div class="eti">ã„ã„ã­ã—ãŸã‚‚ã®ã¯ãªã„ã‚ˆ</div></div>';return;}
      document.getElementById('likes-cards').innerHTML=items.map((x,i)=>
        `<div class="card" style="animation-delay:${i*0.05}s" onclick="window.open('${x.url}','_blank')">
          ${x.thumbnail?`<img class="cth" src="${x.thumbnail}">`:''}
          <div class="cb">
            <div class="cm"><span class="ct ${x.type}">${x.type==='youtube'?'ğŸ“º':x.type==='rss'?'ğŸ“°':x.type==='book'?'ğŸ“š':x.type==='movie'?'ğŸ¬':'ğŸ™ï¸'}</span><span class="cs">${x.source}</span></div>
            <div class="ctt">${x.title}</div>
            <div class="cf"><span class="cd">ğŸ“… ${x.date}</span><button class="cab" onclick="event.stopPropagation();removeLike(${x.id})">ğŸ—‘ï¸</button></div>
          </div>
        </div>`
      ).join('');
    }
    function init(){
      state.tinderIndex=0;
      state.tinderHistory=[];
      updateTinderCard();
    }
    function getFilteredItems(){
      return state.filter==='all'?state.items:state.items.filter(x=>x.type===state.filter);
    }
    function updateTinderCard(){
      const items=getFilteredItems();
      const card=document.getElementById('tinder-card');
      const stl=card.querySelector('.tss.lk');
      const stn=card.querySelector('.tss.np');
      card.style.transition='none';
      card.style.transform='';
      card.classList.remove('sl','sr');
      stl.classList.remove('sh');
      stn.classList.remove('sh');
      if(state.tinderIndex>=items.length){
        document.getElementById('tinder-img').src='';
        document.getElementById('tinder-type').innerHTML='';
        document.getElementById('tinder-title').textContent='ã™ã¹ã¦ãƒã‚§ãƒƒã‚¯ã—ãŸã‚ˆï¼';
        document.getElementById('tinder-date').textContent='';
        document.getElementById('tinder-progress').textContent='';
        return;
      }
      const it=items[state.tinderIndex];
      document.getElementById('tinder-img').src=it.thumbnail||'';
      document.getElementById('tinder-type').innerHTML=`<span class="ct ${it.type}">${it.type==='youtube'?'ğŸ“º':it.type==='rss'?'ğŸ“°':it.type==='book'?'ğŸ“š':it.type==='movie'?'ğŸ¬':'ğŸ™ï¸'}</span> ${it.source}`;
      document.getElementById('tinder-title').textContent=it.title;
      document.getElementById('tinder-date').textContent=`ğŸ“… ${it.date}`;
      document.getElementById('tinder-progress').textContent=`${state.tinderIndex+1}/${items.length}`;
    }
    function handleSwipe(d){
      const items=getFilteredItems();
      if(state.tinderIndex>=items.length)return;
      const item=items[state.tinderIndex];
      if(d==='right'){
        item.liked=true;
        state.tinderHistory.push({index:state.tinderIndex,liked:true});
      }else{
        item.archived=true;
        state.tinderHistory.push({index:state.tinderIndex,liked:false});
      }
      card.style.transition='transform 0.3s,opacity 0.3s';
      card.style.transform=`translateX(${d==='right'?500:-500}px) rotate(${d==='right'?30:-30}deg)`;
      card.style.opacity='0';
      setTimeout(()=>{
        state.tinderIndex++;
        card.style.transition='none';
        card.style.transform='';
        card.style.opacity='';
        stl.classList.remove('sh');
        stn.classList.remove('sh');
        updateTinderCard();
      },300);
    }
    function tinderLike(){handleSwipe('right');}
    function tinderNope(){handleSwipe('left');}
    function undoLast(){
      if(state.tinderHistory.length===0){showToast('ã‚‚ã©ã‚‹ã‚‚ã®ãªã„ã‚ˆ');return;}
      const last=state.tinderHistory.pop();
      state.tinderIndex=last.index;
      const items=getFilteredItems();
      if(items[last.index]){
        if(last.liked){items[last.index].liked=false;items[last.index].archived=false;}
        else{items[last.index].archived=false;}
      }
      updateTinderCard();
      showToast('1ã¤æˆ»ã—ãŸã‚ˆï¼');
    }
    function toggleLike(id){
      const x=state.items.find(i=>i.id===id);
      if(x){x.liked=!x.liked;render();}
    }
    function toggleArchive(id){
      const x=state.items.find(i=>i.id===id);
      if(x){x.archived=!x.archived;render();}
    }
    function removeLike(id){
      deleteTarget=id;
      document.getElementById('confirm-title').textContent='Likeã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ';
      document.getElementById('confirm-text').textContent='ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“';
      document.getElementById('confirm-overlay').classList.add('on');
    }
    function restoreArchive(id){
      const x=state.items.find(i=>i.id===id);
      if(x){x.archived=false;renderArchive();showToast('ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‹ã‚‰å¾©å…ƒã—ãŸã‚ˆï¼');}
    }
    function showToast(msg){
      const c=document.getElementById('toasts');
      const t=document.createElement('div');
      t.className='to';
      t.textContent=msg;
      c.appendChild(t);
      setTimeout(()=>t.remove(),3000);
    }
    function refreshAll(){showToast('æ›´æ–°ã—ãŸã‚ˆï¼','ok');}
    function openSettings(){document.getElementById('settings-modal').classList.add('on');}
    function closeSettings(){document.getElementById('settings-modal').classList.remove('on');}
    function closeConfirm(){document.getElementById('confirm-overlay').classList.remove('on');deleteTarget=null;}
    function confirmDelete(){
      if(deleteTarget!==null){state.items=state.items.filter(x=>x.id!==deleteTarget);render();showToast('å‰Šé™¤ã—ãŸã‚ˆï¼','ok');}
      closeConfirm();
    }
    function updateDemoSource(){
      state.demoSource=document.getElementById('demo-source').value;
      loadDemoData();
    }
    // Swipe handling
    const tc=document.getElementById('tinder-card');
    let isD=false,sx=0,cx=0;
    tc.addEventListener('mousedown',e=>{
      if(state.tinderIndex>=getFilteredItems().length)return;
      isD=true;sx=e.clientX;tc.style.transition='none';
    });
    document.addEventListener('mousemove',e=>{
      if(!isD)return;
      cx=e.clientX-sx;
      const rot=cx*0.05;
      tc.style.transform=`translateX(${cx}px) rotate(${rot}deg)`;
      const sl=tc.querySelector('.tss.lk');
      const sn=tc.querySelector('.tss.np');
      if(cx>30){sl.classList.add('sh');sn.classList.remove('sh');}
      else if(cx<-30){sn.classList.add('sh');sl.classList.remove('sh');}
      else{sl.classList.remove('sh');sn.classList.remove('sh');}
    });
    document.addEventListener('mouseup',e=>{
      if(!isD)return;
      isD=false;
      if(cx>80)tinderLike();else if(cx<-80)tinderNope();else{
        tc.style.transition='transform 0.2s';
        tc.style.transform='';
        tc.querySelector('.tss.lk').classList.remove('sh');
        tc.querySelector('.tss.np').classList.remove('sh');
      }
      cx=0;
    });
    tc.addEventListener('touchstart',e=>{
      if(state.tinderIndex>=getFilteredItems().length)return;
      isD=true;sx=e.touches[0].clientX;tc.style.transition='none';
    });
    tc.addEventListener('touchmove',e=>{
      if(!isD)return;
      e.preventDefault();
      cx=e.touches[0].clientX-sx;
      const rot=cx*0.05;
      tc.style.transform=`translateX(${cx}px) rotate(${rot}deg)`;
      const sl=tc.querySelector('.tss.lk');
      const sn=tc.querySelector('.tss.np');
      if(cx>30){sl.classList.add('sh');sn.classList.remove('sh');}
      else if(cx<-30){sn.classList.add('sh');sl.classList.remove('sh');}
      else{sl.classList.remove('sh');sn.classList.remove('sh');}
    },{passive:false});
    tc.addEventListener('touchend',e=>{
      if(!isD)return;
      isD=false;
      if(cx>80)tinderLike();else if(cx<-80)tinderNope();else{
        tc.style.transition='transform 0.2s';
        tc.style.transform='';
        tc.querySelector('.tss.lk').classList.remove('sh');
        tc.querySelector('.tss.np').classList.remove('sh');
      }
      cx=0;
    });
    init();
  </script>
</body>
</html>
