<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Media Pulse - æ›´æ–°ãƒã‚§ãƒƒã‚¯</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root { 
      --bg: #0a0a0b; 
      --bg-card: #141416; 
      --bg-card-hover: #1a1a1d;
      --accent: #6366f1; 
      --accent-glow: rgba(99, 102, 241, 0.4);
      --text: #fafafa; 
      --text-dim: #71717a; 
      --border: #27272a; 
      --like: #f43f5e; 
      --like-bg: rgba(244, 63, 94, 0.15);
      --nope: #8b5cf6;
      --nope-bg: rgba(139, 92, 246, 0.15);
      --archive: #f59e0b;
      --radius: 16px;
      --radius-sm: 10px;
      --shadow: 0 4px 24px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 40px rgba(0,0,0,0.5);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { 
      font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif; 
      background: var(--bg); 
      color: var(--text); 
      min-height: 100vh; 
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.15), transparent),
        radial-gradient(ellipse 60% 40% at 100% 100%, rgba(139, 92, 246, 0.1), transparent);
      pointer-events: none;
      z-index: -1;
    }
    header { 
      position: sticky; 
      top: 0; 
      height: 64px; 
      background: rgba(10, 10, 11, 0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border); 
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      padding: 0 24px; 
      z-index: 100; 
    }
    .logo { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      font-size: 1.25rem; 
      font-weight: 700; 
    }
    .logo-icon { 
      width: 36px; 
      height: 36px; 
      background: linear-gradient(135deg, var(--accent), #a855f7, var(--like)); 
      border-radius: 10px; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      box-shadow: 0 4px 20px var(--accent-glow);
      animation: logoGlow 3s ease-in-out infinite;
    }
    @keyframes logoGlow {
      0%, 100% { box-shadow: 0 4px 20px var(--accent-glow); }
      50% { box-shadow: 0 4px 30px rgba(139, 92, 246, 0.5); }
    }
    .header-actions { display: flex; gap: 8px; }
    .mode-btn { 
      padding: 8px 14px; 
      border-radius: var(--radius-sm); 
      border: 1px solid var(--border); 
      background: transparent; 
      color: var(--text-dim); 
      cursor: pointer; 
      font-size: 1rem;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .mode-btn:hover { 
      background: var(--bg-card); 
      color: var(--text); 
      transform: translateY(-1px);
    }
    .mode-btn.active { 
      background: var(--accent); 
      border-color: var(--accent); 
      color: white;
      box-shadow: 0 4px 16px var(--accent-glow);
    }
    .btn { 
      padding: 8px 16px; 
      border-radius: var(--radius-sm); 
      border: none; 
      cursor: pointer; 
      font-size: 0.875rem; 
      font-weight: 500; 
      transition: all 0.2s; 
      display: flex; 
      align-items: center; 
      gap: 8px; 
    }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: #5558e3; transform: translateY(-1px); }
    .btn-ghost { background: transparent; color: var(--text-dim); border: 1px solid var(--border); }
    .btn-ghost:hover { background: var(--bg-card); color: var(--text); }
    main { 
      padding-top: 24px; 
      padding-bottom: 48px; 
      max-width: 1200px; 
      margin: 0 auto; 
      padding-left: 24px; 
      padding-right: 24px; 
    }
    .filters { 
      display: flex; 
      gap: 10px; 
      margin-bottom: 24px; 
      flex-wrap: wrap; 
      animation: fadeIn 0.4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .filter-tag { 
      padding: 8px 16px; 
      border-radius: 20px; 
      background: var(--bg-card); 
      border: 1px solid var(--border); 
      color: var(--text-dim); 
      font-size: 0.875rem; 
      cursor: pointer; 
      transition: all 0.2s; 
    }
    .filter-tag:hover { 
      border-color: var(--accent); 
      color: var(--text); 
      transform: translateY(-1px);
    }
    .filter-tag.active { 
      background: var(--accent); 
      border-color: var(--accent); 
      color: white; 
      box-shadow: 0 4px 12px var(--accent-glow);
    }
    .stats { 
      display: flex; 
      gap: 16px; 
      margin-bottom: 24px; 
      padding: 20px; 
      background: var(--bg-card); 
      border-radius: var(--radius); 
      border: 1px solid var(--border);
      flex-wrap: wrap;
      animation: fadeIn 0.5s ease;
    }
    .stat { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      padding: 8px 16px;
      border-radius: var(--radius-sm);
      background: var(--bg);
    }
    .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--accent); }
    .stat-label { font-size: 0.813rem; color: var(--text-dim); }
    .cards-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
      gap: 20px; 
    }
    .card { 
      background: var(--bg-card); 
      border-radius: var(--radius); 
      overflow: hidden; 
      border: 1px solid var(--border); 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
      cursor: pointer; 
      animation: cardIn 0.4s ease backwards;
    }
    .card:hover { 
      transform: translateY(-6px); 
      border-color: var(--accent); 
      box-shadow: 0 20px 40px rgba(99,102,241,0.15); 
    }
    @keyframes cardIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .card-thumb { 
      width: 100%; 
      height: 160px; 
      object-fit: cover; 
      background: linear-gradient(135deg, var(--bg-card), var(--border)); 
    }
    .card-content { padding: 16px; }
    .card-source { 
      display: flex; 
      align-items: center; 
      gap: 8px; 
      margin-bottom: 8px; 
      font-size: 0.75rem; 
      color: var(--text-dim); 
    }
    .card-title { 
      font-size: 0.95rem; 
      font-weight: 500; 
      margin-bottom: 12px; 
      line-height: 1.5; 
      display: -webkit-box; 
      -webkit-line-clamp: 2; 
      -webkit-box-orient: vertical; 
      overflow: hidden; 
    }
    .card-meta { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      font-size: 0.75rem; 
      color: var(--text-dim); 
    }
    .card-actions { display: flex; gap: 6px; }
    .card-btn { 
      width: 32px; 
      height: 32px; 
      border-radius: 8px; 
      border: none; 
      cursor: pointer; 
      font-size: 0.875rem; 
      transition: all 0.2s; 
      background: var(--bg); 
      color: var(--text-dim); 
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card-btn:hover { transform: scale(1.1); }
    .card-btn.liked { color: var(--like); background: var(--like-bg); }
    .card-btn.archived { color: var(--archive); background: rgba(245, 158, 11, 0.15); }
    .tinder-container { 
      display: none; 
      flex-direction: column; 
      align-items: center; 
      justify-content: center; 
      min-height: calc(100vh - 150px); 
      padding: 20px; 
    }
    .tinder-container.active { display: flex; }
    .tinder-wrapper { 
      position: relative; 
      width: 100%; 
      max-width: 360px; 
      height: 540px; 
      perspective: 1000px; 
    }
    .tinder-card { 
      position: absolute; 
      width: 100%; 
      height: 100%; 
      background: var(--bg-card); 
      border-radius: 24px; 
      overflow: hidden; 
      box-shadow: var(--shadow-lg); 
      transform-origin: 50% 100%; 
      transition: box-shadow 0.3s;
      will-change: transform;
    }
    .tinder-card.dragging { 
      box-shadow: 0 30px 80px rgba(0,0,0,0.6); 
      cursor: grabbing; 
    }
    .tinder-card.swiping-left { border: 3px solid var(--nope); }
    .tinder-card.swiping-right { border: 3px solid var(--like); }
    .tinder-thumb { 
      width: 100%; 
      height: 300px; 
      object-fit: cover; 
      background: linear-gradient(135deg, var(--bg-card), var(--border)); 
    }
    .tinder-content { 
      padding: 20px; 
      height: calc(100% - 300px); 
      display: flex; 
      flex-direction: column; 
    }
    .tinder-source { 
      display: flex; 
      align-items: center; 
      gap: 8px; 
      font-size: 0.875rem; 
      color: var(--text-dim); 
      margin-bottom: 8px; 
    }
    .tinder-title { 
      font-size: 1.25rem; 
      font-weight: 600; 
      margin-bottom: 12px; 
      line-height: 1.4; 
      flex: 1; 
      overflow: hidden; 
    }
    .tinder-date { font-size: 0.875rem; color: var(--text-dim); }
    .tinder-overlay { 
      position: absolute; 
      top: 24px; 
      padding: 12px 24px; 
      border-radius: 12px; 
      font-size: 1.75rem; 
      font-weight: 800; 
      text-transform: uppercase; 
      letter-spacing: 2px; 
      opacity: 0; 
      transform: rotate(-15deg); 
      transition: all 0.2s; 
      pointer-events: none; 
      z-index: 10;
    }
    .tinder-overlay.show { opacity: 1; }
    .tinder-overlay.like { 
      right: 24px; 
      background: var(--like); 
      color: white; 
      transform: rotate(15deg); 
    }
    .tinder-overlay.nope { 
      left: 24px; 
      background: var(--nope); 
      color: white; 
      transform: rotate(-15deg); 
    }
    .tinder-hint { 
      display: flex; 
      justify-content: space-between; 
      width: 100%; 
      max-width: 360px; 
      margin-top: 16px; 
      color: var(--text-dim); 
      font-size: 0.813rem; 
      opacity: 0.6; 
    }
    .tinder-actions { 
      display: flex; 
      gap: 16px; 
      margin-top: 24px; 
    }
    .tinder-btn { 
      width: 60px; 
      height: 60px; 
      border-radius: 50%; 
      border: 2px solid; 
      background: var(--bg-card); 
      cursor: pointer; 
      font-size: 1.25rem; 
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
    }
    .tinder-btn:active { transform: scale(0.95); }
    .tinder-btn.nope { border-color: var(--nope); color: var(--nope); }
    .tinder-btn.nope:hover { 
      background: var(--nope); 
      color: white; 
      transform: scale(1.1);
      box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
    }
    .tinder-btn.undo { border-color: var(--archive); color: var(--archive); }
    .tinder-btn.undo:hover { 
      background: var(--archive); 
      color: white; 
      transform: scale(1.1);
      box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
    }
    .tinder-btn.like { border-color: var(--like); color: var(--like); }
    .tinder-btn.like:hover { 
      background: var(--like); 
      color: white; 
      transform: scale(1.1);
      box-shadow: 0 8px 24px rgba(244, 63, 94, 0.4);
    }
    .tinder-counter { 
      margin-top: 16px; 
      font-size: 0.875rem; 
      color: var(--text-dim); 
      padding: 8px 16px;
      background: var(--bg-card);
      border-radius: 20px;
    }
    .empty { 
      text-align: center; 
      padding: 80px 24px; 
      color: var(--text-dim); 
      grid-column: 1 / -1;
    }
    .empty-icon { font-size: 4rem; margin-bottom: 16px; opacity: 0.6; }
    .empty-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 8px; color: var(--text); }
    .modal-overlay { 
      position: fixed; 
      inset: 0; 
      background: rgba(0,0,0,0.8); 
      backdrop-filter: blur(8px); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      z-index: 200; 
      opacity: 0; 
      visibility: hidden; 
      transition: all 0.3s; 
    }
    .modal-overlay.active { opacity: 1; visibility: visible; }
    .modal { 
      background: var(--bg-card); 
      border-radius: 24px; 
      width: 90%; 
      max-width: 560px; 
      max-height: 85vh; 
      overflow-y: auto; 
      transform: scale(0.9) translateY(20px); 
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
      border: 1px solid var(--border);
    }
    .modal-overlay.active .modal { transform: scale(1) translateY(0); }
    .modal-header { 
      padding: 20px 24px; 
      border-bottom: 1px solid var(--border); 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      position: sticky;
      top: 0;
      background: var(--bg-card);
      z-index: 10;
    }
    .modal-title { font-size: 1.25rem; font-weight: 600; }
    .modal-close { 
      width: 36px; 
      height: 36px; 
      border-radius: 10px; 
      border: none; 
      background: var(--bg); 
      color: var(--text-dim); 
      cursor: pointer; 
      font-size: 1.25rem; 
      transition: all 0.2s;
    }
    .modal-close:hover { background: var(--bg-card-hover); color: var(--text); }
    .modal-body { padding: 24px; }
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 8px; color: var(--text-dim); }
    .form-input, .form-select { 
      width: 100%; 
      padding: 14px 18px; 
      border-radius: 12px; 
      border: 1px solid var(--border); 
      background: var(--bg); 
      color: var(--text); 
      font-size: 0.95rem; 
      transition: all 0.2s;
    }
    .form-input:focus, .form-select:focus { 
      outline: none; 
      border-color: var(--accent); 
      box-shadow: 0 0 0 3px var(--accent-glow);
    }
    .tabs { display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 1px solid var(--border); padding-bottom: 12px; }
    .tab { 
      padding: 10px 18px; 
      border-radius: 10px; 
      border: none; 
      background: transparent; 
      color: var(--text-dim); 
      cursor: pointer; 
      font-size: 0.875rem; 
      font-weight: 500;
      transition: all 0.2s;
    }
    .tab:hover { color: var(--text); background: var(--bg); }
    .tab.active { background: var(--accent); color: white; }
    .toast-container { 
      position: fixed; 
      bottom: 24px; 
      right: 24px; 
      z-index: 300; 
      display: flex; 
      flex-direction: column; 
      gap: 12px; 
    }
    .toast { 
      padding: 14px 20px; 
      background: var(--bg-card); 
      border: 1px solid var(--border); 
      border-radius: 12px; 
      font-size: 0.875rem; 
      animation: toastIn 0.3s ease; 
      box-shadow: var(--shadow-lg);
    }
    .toast.success { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); }
    @keyframes toastIn { 
      from { transform: translateX(100%); opacity: 0; } 
      to { transform: translateX(0); opacity: 1; } 
    }
    .confirm-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 250;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s;
    }
    .confirm-overlay.active { opacity: 1; visibility: visible; }
    .confirm-box {
      background: var(--bg-card);
      border-radius: 20px;
      padding: 24px;
      max-width: 320px;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.2s;
    }
    .confirm-overlay.active .confirm-box { transform: scale(1); }
    .confirm-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 12px; }
    .confirm-text { color: var(--text-dim); margin-bottom: 20px; font-size: 0.875rem; }
    .confirm-actions { display: flex; gap: 12px; justify-content: center; }
    .confirm-btn {
      padding: 10px 24px;
      border-radius: 10px;
      border: none;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    .confirm-btn.cancel { background: var(--bg); color: var(--text-dim); }
    .confirm-btn.danger { background: var(--like); color: white; }
    @media (max-width: 768px) { 
      header { padding: 0 16px; } 
      main { padding-left: 16px; padding-right: 16px; } 
      .cards-grid { grid-template-columns: 1fr; } 
      .tinder-wrapper { height: 500px; }
      .stats { flex-direction: column; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <div class="logo-icon">ğŸ“¡</div>
      <span>Media Pulse</span>
    </div>
    <div class="header-actions">
      <button class="mode-btn active" data-mode="grid" onclick="setMode('grid')">ğŸ“‹</button>
      <button class="mode-btn" data-mode="tinder" onclick="setMode('tinder')">ğŸ’˜</button>
      <button class="mode-btn" data-mode="likes" onclick="setMode('likes')">â¤ï¸</button>
      <button class="mode-btn" data-mode="archive" onclick="setMode('archive')">ğŸ“¦</button>
      <button class="btn btn-ghost" onclick="refreshAll()">ğŸ”„</button>
      <button class="btn btn-primary" onclick="openSettings()">âš™ï¸</button>
    </div>
  </header>
  <main>
    <div id="grid-view">
      <div class="filters">
        <button class="filter-tag active" data-filter="all">ã™ã¹ã¦</button>
        <button class="filter-tag" data-filter="youtube">ğŸ“º</button>
        <button class="filter-tag" data-filter="rss">ğŸ“°</button>
        <button class="filter-tag" data-filter="book">ğŸ“š</button>
        <button class="filter-tag" data-filter="movie">ğŸ¬</button>
      </div>
      <div class="stats">
        <div class="stat"><span class="stat-value" id="total-count">0</span><span class="stat-label">Total</span></div>
        <div class="stat"><span class="stat-value" id="like-count">0</span><span class="stat-label">Like</span></div>
        <div class="stat"><span class="stat-value" id="archive-count">0</span><span class="stat-label">Archive</span></div>
      </div>
      <div class="cards-grid" id="cards"></div>
    </div>
    <div class="tinder-container" id="tinder-view">
      <div class="tinder-wrapper" id="tinder-wrapper">
        <div class="tinder-card" id="tinder-card">
          <div class="tinder-overlay like">LIKE</div>
          <div class="tinder-overlay nope">NOPE</div>
          <img class="tinder-thumb" id="tinder-thumb" src="" alt="">
          <div class="tinder-content">
            <div class="tinder-source" id="tinder-source"></div>
            <div class="tinder-title" id="tinder-title"></div>
            <div class="tinder-date" id="tinder-date"></div>
          </div>
        </div>
      </div>
      <div class="tinder-hint">
        <span>â† ã‚¹ãƒ¯ã‚¤ãƒ—ã§ nope</span>
        <span>ã‚¹ãƒ¯ã‚¤ãƒ—ã§ like â†’</span>
      </div>
      <div class="tinder-actions">
        <button class="tinder-btn nope" onclick="tinderNope()">âœ•</button>
        <button class="tinder-btn undo" onclick="undoLast()" title="1ã¤æˆ»ã‚‹">â†©ï¸</button>
        <button class="tinder-btn like" onclick="tinderLike()">â¤ï¸</button>
      </div>
      <div class="tinder-counter" id="tinder-counter"></div>
    </div>
    <div id="likes-view" style="display:none;">
      <h2 style="margin-bottom:20px;">â¤ï¸ Likeã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2>
      <div class="cards-grid" id="likes-cards"></div>
    </div>
    <div id="archive-view" style="display:none;">
      <h2 style="margin-bottom:20px;">ğŸ“¦ Archiveï¼ˆã‚¹ã‚­ãƒƒãƒ—ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰</h2>
      <p style="color:var(--text-dim);margin-bottom:24px;font-size:0.875rem;">ä¸€å®šæœŸé–“ä¿å­˜ã•ã‚Œã¾ã™</p>
      <div class="cards-grid" id="archive-cards"></div>
    </div>
  </main>
  <div class="modal-overlay" id="settings-modal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">è¨­å®š</h2>
        <button class="modal-close" onclick="closeSettings()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="tabs">
          <button class="tab active" data-tab="demo">ãƒ‡ãƒ¢</button>
          <button class="tab" data-tab="about">æ¦‚è¦</button>
        </div>
        <div id="tab-demo">
          <p style="color:var(--text-dim);margin-bottom:16px;font-size:0.875rem;">
            ğŸ‰ ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ON - APIã‚­ãƒ¼ãªã—ã§åŠ¨ãã¾ã™
          </p>
          <div class="form-group">
            <label class="form-label">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹</label>
            <select class="form-select" id="demo-source" onchange="updateDemoSource()">
              <option value="tech">ğŸ’» ãƒ†ãƒƒã‚¯ãƒ»ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼</option>
              <option value="entertainment">ğŸ¬ ã‚¨ãƒ³ã‚¿ãƒ¡</option>
              <option value="news">ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹</option>
              <option value="science">ğŸ”¬ ç§‘å­¦ãƒ»æ•™è‚²</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="loadDemoData()" style="width:100%">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿æ›´æ–°</button>
        </div>
        <div id="tab-about" style="display:none">
          <div style="text-align:center;padding:20px;">
            <div style="font-size:3rem;margin-bottom:16px;">ğŸ“¡</div>
            <h3 style="margin-bottom:8px;">Media Pulse</h3>
            <p style="color:var(--text-dim);margin-bottom:20px;font-size:0.875rem;">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0</p>
            <p style="color:var(--text-dim);font-size:0.813rem;">
              æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€<br>
              åŠ¹ç‡ã‚ˆãæ¶ˆè´¹ã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒª
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="confirm-overlay" id="confirm-overlay">
    <div class="confirm-box">
      <div class="confirm-title" id="confirm-title">å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</div>
      <div class="confirm-text" id="confirm-text">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</div>
      <div class="confirm-actions">
        <button class="confirm-btn cancel" onclick="closeConfirm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="confirm-btn danger" onclick="confirmDelete()">å‰Šé™¤</button>
      </div>
    </div>
  </div>
  <div class="toast-container" id="toasts"></div>
  <script>
    let state = {
      items: [],
      filter: 'all',
      currentMode: 'grid',
      tinderIndex: 0,
      tinderHistory: [],
      demoMode: true,
      demoSource: 'tech'
    };
    
    let deleteTarget = null;
    
    const demoData = {
      tech: [
        {id:1,type:'youtube',title:'ã€å®Œå…¨ç‰ˆã€‘React 19 æ–°æ©Ÿèƒ½ç·ã¾ã¨ã‚',source:'WebMaster',thumbnail:'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:2,type:'youtube',title:'Claude APIå®Œå…¨ã‚¬ã‚¤ãƒ‰ - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä½œã‚ã†',source:'CodeLab',thumbnail:'https://i.ytimg.com/vi/ClaudeAPI/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:3,type:'rss',title:'æ–°ã—ã„JavaScriptãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒç™ºè¡¨ã•ã‚ŒãŸä»¶',source:'TechCrunch Japan',thumbnail:'',date:'2026-02-17',url:'https://techcrunch.jp',liked:false,archived:false,archivedAt:null},
        {id:4,type:'rss',title:'AIãŒã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã‚‹æœªæ¥',source:'Zenn',thumbnail:'',date:'2026-02-16',url:'https://zenn.dev',liked:false,archived:false,archivedAt:null},
        {id:5,type:'book',title:'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨­è¨ˆã®Gem',source:'æŠ€è¡“è©•è«–ç¤¾',thumbnail:'',date:'2026-02-16',url:'https://gihyo.jp',liked:false,archived:false,archivedAt:null},
        {id:6,type:'movie',title:'ã‚¹ãƒãƒ¼ãƒˆã€AIãŒäººé–“ã‚’çš„æ“ä½œã‚’é–‹å§‹...',source:'MovieDB',thumbnail:'',date:'2026-02-15',url:'https://moviedb.org',liked:false,archived:false,archivedAt:null},
        {id:7,type:'youtube',title:'vimã¯æ­»ãªãªã„ - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ²¼ã®æ·±ã•',source:'Linux Fan',thumbnail:'https://i.ytimg.com/vi/vim/maxresdefault.jpg',date:'2026-02-15',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:8,type:'rss',title:'TypeScript 6.0 äºˆæƒ³ã¾ã¨ã‚',source:'TS Weekly',thumbnail:'',date:'2026-02-14',url:'https://example.com',liked:false,archived:false,archivedAt:null}
      ],
      entertainment: [
        {id:1,type:'youtube',title:'ã€æœ€æ–°ã€‘2026å¹´å†¬ã‚¢ãƒ‹ãƒ¡ rankings TOP10',source:'AnimeHype',thumbnail:'https://i.ytimg.com/vi/anime/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:2,type:'movie',title:'å¾…æœ›ã®ç¶šç·¨ï¼ã‚ã®åä½œã®æ–°ä½œå…¬é–‹',source:' Cinema',thumbnail:'',date:'2026-02-17',url:'https://moviedb.org',liked:false,archived:false,archivedAt:null},
        {id:3,type:'youtube',title:'æœ‰åç›£ç£ãŒèªã‚‹ï¼æ˜ ç”»ä½œã‚Šã® æ·±å¥¥',source:'DirectorTalk',thumbnail:'https://i.ytimg.com/vi/dir/maxresdefault.jpg',date:'2026-02-16',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:4,type:'rss',title:'Netflixã§æ³¨ç›®ãªæœ€æ–°ãƒ‰ãƒ©ãƒ',source:'Filmarks',thumbnail:'',date:'2026-02-16',url:'https://filmarks.com',liked:false,archived:false,archivedAt:null},
        {id:5,type:'movie',title:'ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼è³ãƒãƒŸãƒãƒ¼ãƒˆä½œå“',source:'Oscar2026',thumbnail:'',date:'2026-02-15',url:'https://oscars.com',liked:false,archived:false,archivedAt:null},
        {id:6,type:'youtube',title:'åœ°ä¸‹ã‚¢ã‚¤ãƒ‰ãƒ« documenta',source:'IdolDocumentary',thumbnail:'https://i.ytimg.com/vi/idol/maxresdefault.jpg',date:'2026-02-14',url:'https://youtube.com',liked:false,archived:false,archivedAt:null}
      ],
      news: [
        {id:1,type:'rss',title:'ä¸»è¦ç´™ãŒä¼ãˆã‚‹çµŒæ¸ˆNews',source:'æ—¥æœ¬çµŒæ¸ˆæ–°è',thumbnail:'',date:'2026-02-17',url:'https://nikkei.com',liked:false,archived:false,archivedAt:null},
        {id:2,type:'rss',title:'æ”¿åºœæ–°ã—ã„æ”¿ç­–ç™ºè¡¨',source:'NHK',thumbnail:'',date:'2026-02-17',url:'https://nhk.jp',liked:false,archived:false,archivedAt:null},
        {id:3,type:'rss',title:'ãƒ†ãƒƒã‚¯æ¥­ç•Œã®å¤§å‹M&A',source:'TechCrunch',thumbnail:'',date:'2026-02-16',url:'https://techcrunch.jp',liked:false,archived:false,archivedAt:null},
        {id:4,type:'rss',title:'ç’°å¢ƒå•é¡Œã«é–¢ã™ã‚‹ æœ€æ–°æŠ¥å‘Š',source:'Greenpeace',thumbnail:'',date:'2026-02-15',url:'https://greenpeace.org',liked:false,archived:false,archivedAt:null},
        {id:5,type:'rss',title:'æ°—è±¡äºˆå ±å£«ãŒè§£èª¬ã™ã‚‹æ¬¡ã®é€±ã®å¤©æ°—',source:'Weather',thumbnail:'',date:'2026-02-14',url:'https://weather.com',liked:false,archived:false,archivedAt:null}
      ],
      science: [
        {id:1,type:'youtube',title:'å®‡å®™ã®èµ·æºã‹ã‚‰æœªæ¥ã¾ã§ - å®Œå…¨ç‰ˆ',source:'NASA',thumbnail:'https://i.ytimg.com/vi/space/maxresdefault.jpg',date:'2026-02-17',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:2,type:'rss',title:'æœ€æ–°ã®é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®é€²æ­©',source:'ScienceDaily',thumbnail:'',date:'2026-02-16',url:'https://sciencedaily.com',liked:false,archived:false,archivedAt:null},
        {id:3,type:'youtube',title:'è„³ç§‘å­¦ãŒè§£æ˜ã™ã‚‹ã€Œé›†ä¸­åŠ›ã€ã®ç§˜å¯†',source:'BrainScience',thumbnail:'https://i.ytimg.com/vi/brain/maxresdefault.jpg',date:'2026-02-15',url:'https://youtube.com',liked:false,archived:false,archivedAt:null},
        {id:4,type:'rss',title:'AIãŒé€²åŒ–ã™ã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—',source:'MIT Technology',thumbnail:'',date:'2026-02-14',url:'https://technologyreview.com',liked:false,archived:false,archivedAt:null},
        {id:5,type:'book',title:'é‡å­åŠ›å­¦ãŒã‚ã‹ã‚‹å…¥é–€æ›¸',source:'è¬›è«‡ç¤¾',thumbnail:'',date:'2026-02-13',url:'https://kadokawa.com',liked:false,archived:false,archivedAt:null}
      ]
    };
    
    function init() {
      loadDemoData();
      setupEventListeners();
      render();
    }
    
    function loadDemoData() {
      state.items = demoData[state.demoSource] || demoData.tech;
      render();
      showToast('ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã—ãŸã‚ˆï¼', 'success');
    }
    
    function updateDemoSource() {
      state.demoSource = document.getElementById('demo-source').value;
      loadDemoData();
    }
    
    function setMode(mode) {
      state.currentMode = mode;
      document.querySelectorAll('.mode-btn').forEach(b => b.classList.toggle('active', b.dataset.mode === mode));
      document.getElementById('grid-view').style.display = mode === 'grid' ? 'block' : 'none';
      document.getElementById('tinder-view').classList.toggle('active', mode === 'tinder');
      document.getElementById('likes-view').style.display = mode === 'likes' ? 'block' : 'none';
      document.getElementById('archive-view').style.display = mode === 'archive' ? 'block' : 'none';
      if(mode === 'tinder') initTinder();
      if(mode === 'archive') renderArchive();
      render();
    }
    
    function render() {
      const c = document.getElementById('cards');
      let items = state.filter === 'all' ? state.items : state.items.filter(x => x.type === state.filter);
      
      if(!items.length) {
        c.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ“­</div><div class="empty-title">ã¾ã ä½•ã‚‚ãªã„ã‚ˆ</div></div>';
      } else {
        c.innerHTML = items.map((x, i) => `
          <div class="card" style="animation-delay: ${i * 0.05}s" onclick="window.open('${x.url}', '_blank')">
            ${x.thumbnail ? `<img class="card-thumb" src="${x.thumbnail}" alt="">` : ''}
            <div class="card-content">
              <div class="card-source">
                <span class="type-icon">${x.type === 'youtube' ? 'ğŸ“º' : x.type === 'rss' ? 'ğŸ“°' : x.type === 'book' ? 'ğŸ“š' : 'ğŸ¬'}</span>
                ${x.source}
              </div>
              <div class="card-title">${x.title}</div>
              <div class="card-meta">
                <span>ğŸ“… ${x.date}</span>
                <div class="card-actions">
                  ${x.liked ? `<button class="card-btn liked" onclick="event.stopPropagation();toggleLike(${x.id})">â¤ï¸</button>` : ''}
                  ${x.archived ? `<button class="card-btn archived" onclick="event.stopPropagation();toggleArchive(${x.id})">ğŸ“¦</button>` : ''}
                  <button class="card-btn" onclick="event.stopPropagation();showDetails(${x.id})">ğŸ”</button>
                </div>
              </div>
            </div>
          </div>
        `).join('');
      }
      
      document.getElementById('total-count').textContent = state.items.length;
      document.getElementById('like-count').textContent = state.items.filter(x => x.liked).length;
      document.getElementById('archive-count').textContent = state.items.filter(x => x.archived).length;
    }
    
    function renderArchive() {
      const c = document.getElementById('archive-cards');
      const items = state.items.filter(x => x.archived);
      
      if(!items.length) {
        c.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ“¦</div><div class="empty-title">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã¯ç©ºã ã‚ˆ</div></div>';
      } else {
        c.innerHTML = items.map((x, i) => `
          <div class="card" style="animation-delay: ${i * 0.05}s" onclick="window.open('${x.url}', '_blank')">
            ${x.thumbnail ? `<img class="card-thumb" src="${x.thumbnail}" alt="">` : ''}
            <div class="card-content">
              <div class="card-source">
                <span class="type-icon">${x.type === 'youtube' ? 'ğŸ“º' : x.type === 'rss' ? 'ğŸ“°' : x.type === 'book' ? 'ğŸ“š' : 'ğŸ¬'}</span>
                ${x.source}
              </div>
              <div class="card-title">${x.title}</div>
              <div class="card-meta">
                <span>ğŸ“… ${x.date}</span>
                <button class="card-btn" onclick="event.stopPropagation();restoreArchive(${x.id})">â†©ï¸</button>
              </div>
            </div>
          </div>
        `).join('');
      }
    }
    
    function renderLikes() {
      const c = document.getElementById('likes-cards');
      const items = state.items.filter(x => x.liked);
      
      if(!items.length) {
        c.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ’”</div><div class="empty-title">Likeã—ãŸã‚‚ã®ã¯ãªã„ã‚ˆ</div></div>';
      } else {
        c.innerHTML = items.map((x, i) => `
          <div class="card" style="animation-delay: ${i * 0.05}s" onclick="window.open('${x.url}', '_blank')">
            ${x.thumbnail ? `<img class="card-thumb" src="${x.thumbnail}" alt="">` : ''}
            <div class="card-content">
              <div class="card-source">
                <span class="type-icon">${x.type === 'youtube' ? 'ğŸ“º' : x.type === 'rss' ? 'ğŸ“°' : x.type === 'book' ? 'ğŸ“š' : 'ğŸ¬'}</span>
                ${x.source}
              </div>
              <div class="card-title">${x.title}</div>
              <div class="card-meta">
                <span>ğŸ“… ${x.date}</span>
                <button class="card-btn" onclick="event.stopPropagation();removeLike(${x.id})">ğŸ—‘ï¸</button>
              </div>
            </div>
          </div>
        `).join('');
      }
    }
    
    function initTinder() {
      state.tinderIndex = 0;
      state.tinderHistory = [];
      updateTinderCard();
    }
    
    function getFilteredItems() {
      return state.filter === 'all' ? state.items : state.items.filter(x => x.type === state.filter);
    }
    
    function updateTinderCard() {
      const items = getFilteredItems();
      const card = document.getElementById('tinder-card');
      const overlayLike = card.querySelector('.tinder-overlay.like');
      const overlayNope = card.querySelector('.tinder-overlay.nope');
      
      card.style.transition = 'none';
      card.style.transform = '';
      card.classList.remove('swiping-left', 'swiping-right');
      overlayLike.classList.remove('show');
      overlayNope.classList.remove('show');
      
      if(state.tinderIndex >= items.length) {
        document.getElementById('tinder-thumb').src = '';
        document.getElementById('tinder-source').innerHTML = 'ğŸ‰';
        document.getElementById('tinder-title').textContent = 'ã™ã¹ã¦ãƒã‚§ãƒƒã‚¯ã—ãŸã‚ˆï¼';
        document.getElementById('tinder-date').textContent = '';
        document.getElementById('tinder-counter').textContent = '';
        return;
      }
      
      const it = items[state.tinderIndex];
      document.getElementById('tinder-thumb').src = it.thumbnail || '';
      document.getElementById('tinder-source').innerHTML = `<span class="type-icon">${it.type === 'youtube' ? 'ğŸ“º' : it.type === 'rss' ? 'ğŸ“°' : it.type === 'book' ? 'ğŸ“š' : 'ğŸ¬'}</span> ${it.source}`;
      document.getElementById('tinder-title').textContent = it.title;
      document.getElementById('tinder-date').textContent = `ğŸ“… ${it.date}`;
      document.getElementById('tinder-counter').textContent = `${state.tinderIndex + 1} / ${items.length}`;
    }
    
    function showOverlay(direction) {
      const overlay = direction === 'right' 
        ? document.querySelector('.tinder-overlay.like')
        : document.querySelector('.tinder-overlay.nope');
      overlay.classList.add('show');
    }
    
    function hideOverlay() {
      document.querySelector('.tinder-overlay.like').classList.remove('show');
      document.querySelector('.tinder-overlay.nope').classList.remove('show');
    }
    
    function handleSwipe(direction) {
      const items = getFilteredItems();
      if(state.tinderIndex >= items.length) return;
      
      const item = items[state.tinderIndex];
      if(direction === 'right') {
        item.liked = true;
        state.tinderHistory.push({index: state.tinderIndex, liked: true});
      } else {
        item.archived = true;
        item.archivedAt = new Date().toISOString();
        state.tinderHistory.push({index: state.tinderIndex, liked: false});
      }
      saveState();
      
      card.style.transition = 'transform 0.3s, opacity 0.3s';
      card.style.transform = `translateX(${direction === 'right' ? 500 : -500}px) rotate(${direction === 'right' ? 30 : -30}deg)`;
      card.style.opacity = '0';
      
      setTimeout(() => {
        state.tinderIndex++;
        card.style.transition = 'none';
        card.style.transform = '';
        card.style.opacity = '';
        hideOverlay();
        updateTinderCard();
      }, 300);
    }
    
    function tinderLike() { handleSwipe('right'); }
    function tinderNope() { handleSwipe('left'); }
    
    function undoLast() {
      if(state.tinderHistory.length === 0) {
        showToast('ã‚‚ã©ã‚‹ã‚‚ã®ãªã„ã‚ˆ');
        return;
      }
      
      const last = state.tinderHistory.pop();
      state.tinderIndex = last.index;
      const items = getFilteredItems();
      if(items[last.index]) {
        if(last.liked) {
          items[last.index].liked = false;
          items[last.index].archived = false;
          items[last.index].archivedAt = null;
        } else {
          items[last.index].archived = false;
          items[last.index].archivedAt = null;
        }
      }
      saveState();
      updateTinderCard();
      showToast('1ã¤æˆ»ã—ãŸã‚ˆï¼');
    }
    
    function toggleLike(id) {
      const x = state.items.find(i => i.id === id);
      if(x) {
        x.liked = !x.liked;
        saveState();
        render();
      }
    }
    
    function toggleArchive(id) {
      const x = state.items.find(i => i.id === id);
      if(x) {
        x.archived = !x.archived;
        if(x.archived) x.archivedAt = new Date().toISOString();
        saveState();
        render();
      }
    }
    
    function removeLike(id) {
      deleteTarget = id;
      document.getElementById('confirm-title').textContent = 'Likeã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ';
      document.getElementById('confirm-text').textContent = 'ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“';
      document.getElementById('confirm-overlay').classList.add('active');
    }
    
    function restoreArchive(id) {
      const x = state.items.find(i => i.id === id);
      if(x) {
        x.archived = false;
        x.archivedAt = null;
        saveState();
        renderArchive();
        showToast('ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‹ã‚‰å¾©å…ƒã—ãŸã‚ˆï¼');
      }
    }
    
    function showDetails(id) {
      const x = state.items.find(i => i.id === id);
      if(x) {
        alert(`${x.title}\n\nã‚½ãƒ¼ã‚¹: ${x.source}\næ—¥ä»˜: ${x.date}\nURL: ${x.url}`);
      }
    }
    
    function saveState() {
      localStorage.setItem('mediaPulseState', JSON.stringify(state));
    }
    
    function refreshAll() {
      showToast('æ›´æ–°ã—ãŸã‚ˆï¼', 'success');
    }
    
    function showToast(msg, type = '') {
      const c = document.getElementById('toasts');
      const t = document.createElement('div');
      t.className = `toast ${type}`;
      t.textContent = msg;
      c.appendChild(t);
      setTimeout(() => t.remove(), 3000);
    }
    
    function setupEventListeners() {
      document.querySelectorAll('.filter-tag').forEach(b => {
        b.addEventListener('click', () => {
          document.querySelectorAll('.filter-tag').forEach(x => x.classList.remove('active'));
          b.classList.add('active');
          state.filter = b.dataset.filter;
          if(state.currentMode === 'tinder') initTinder();
          render();
        });
      });
      
      document.querySelectorAll('.tab').forEach(b => {
        b.addEventListener('click', () => {
          document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
          b.classList.add('active');
          ['demo', 'about'].forEach(x => document.getElementById(`tab-${x}`).style.display = 'none');
          document.getElementById(`tab-${b.dataset.tab}`).style.display = 'block';
        });
      });
      
      document.getElementById('demo-source').addEventListener('change', updateDemoSource);
    }
    
    function openSettings() {
      document.getElementById('settings-modal').classList.add('active');
    }
    
    function closeSettings() {
      document.getElementById('settings-modal').classList.remove('active');
    }
    
    function closeConfirm() {
      document.getElementById('confirm-overlay').classList.remove('active');
      deleteTarget = null;
    }
    
    function confirmDelete() {
      if(deleteTarget !== null) {
        state.items = state.items.filter(x => x.id !== deleteTarget);
        saveState();
        render();
        showToast('å‰Šé™¤ã—ãŸã‚ˆï¼', 'success');
      }
      closeConfirm();
    }
    
    // Tinder drag handling
    const card = document.getElementById('tinder-card');
    let isDragging = false, startX = 0, currentX = 0;
    
    card.addEventListener('mousedown', e => {
      if(state.tinderIndex >= getFilteredItems().length) return;
      isDragging = true;
      startX = e.clientX;
      card.style.transition = 'none';
    });
    
    document.addEventListener('mousemove', e => {
      if(!isDragging) return;
      currentX = e.clientX - startX;
      const rotation = currentX * 0.05;
      card.style.transform = `translateX(${currentX}px) rotate(${rotation}deg)`;
      if(currentX > 30) showOverlay('right');
      else if(currentX < -30) showOverlay('left');
      else hideOverlay();
    });
    
    document.addEventListener('mouseup', e => {
      if(!isDragging) return;
      isDragging = false;
      if(currentX > 80) tinderLike();
      else if(currentX < -80) tinderNope();
      else {
        card.style.transition = 'transform 0.2s';
        card.style.transform = '';
        hideOverlay();
      }
      currentX = 0;
    });
    
    // Touch
    card.addEventListener('touchstart', e => {
      if(state.tinderIndex >= getFilteredItems().length) return;
      isDragging = true;
      startX = e.touches[0].clientX;
      card.style.transition = 'none';
    });
    
    card.addEventListener('touchmove', e => {
      if(!isDragging) return;
      e.preventDefault();
      currentX = e.touches[0].clientX - startX;
      const rotation = currentX * 0.05;
      card.style.transform = `translateX(${currentX}px) rotate(${rotation}deg)`;
      if(currentX > 30) showOverlay('right');
      else if(currentX < -30) showOverlay('left');
      else hideOverlay();
    }, {passive: false});
    
    card.addEventListener('touchend', e => {
      if(!isDragging) return;
      isDragging = false;
      if(currentX > 80) tinderLike();
      else if(currentX < -80) tinderNope();
      else {
        card.style.transition = 'transform 0.2s';
        card.style.transform = '';
        hideOverlay();
      }
      currentX = 0;
    });
    
    init();
  </script>
</body>
</html>